<div class="layout-container">
  <div class="layout-container__main">
    <mat-card appearance="outlined" class="layout-container__main__cta-card">
      <div class="layout-container__main__cta-card__image-container">
        <img src="assets/cta-banner.png" loading="eager" alt="CTA Banner" class="layout-container__main__cta-card__image-container__image" />
      </div>
    </mat-card>

    <mat-card appearance="outlined" class="layout-container__main__datasets">
      <mat-card-content>
        <div class="layout-container__main__datasets__simple-cards">
          <mat-card
           appearance="outlined"
           class="layout-container__main__datasets__simple-cards__simple-card"
           [ngClass]="{'selected': selectedCard === 'review'}"
           (click)="filterDatasetsByStatus('review')">
            <mat-card-content>Dataset Reviews</mat-card-content>
          </mat-card>
          <mat-card appearance="outlined"
           class="layout-container__main__datasets__simple-cards__simple-card"
           [ngClass]="{'selected': selectedCard === 'fail'}"
           (click)="filterDatasetsByStatus('fail')">
            <mat-card-content>Failed Uploads</mat-card-content>
          </mat-card>
          <mat-card
            appearance="outlined"
            class="layout-container__main__datasets__simple-cards__simple-card"
            [ngClass]="{'selected': selectedCard === 'shares'}"
            (click)="filterDatasetsByStatus('shares')">
            <mat-card-content>Shares by company</mat-card-content>
          </mat-card>
        </div>

        <h4 class="layout-container__main__datasets__heading">Dataset Table</h4>

        <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
          <ng-container matColumnDef="id">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>ID</th>
            <td mat-cell *matCellDef="let dataset" class="table-row">{{ dataset.id }}</td>
          </ng-container>

          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Dataset name</th>
            <td mat-cell *matCellDef="let dataset" class="table-row">{{ dataset.name }}</td>
          </ng-container>

          <ng-container matColumnDef="uploadedBy">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Uploaded By</th>
            <td mat-cell *matCellDef="let dataset" class="table-row">{{ dataset.uploadedBy }}</td>
          </ng-container>

          <ng-container matColumnDef="updateDate">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Updated</th>
            <td mat-cell *matCellDef="let dataset" class="table-row">{{ dataset.updateDate | date }}</td>
          </ng-container>

          <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef>Actions</th>
            <td mat-cell *matCellDef="let dataset" class="table-row">
              <button (click)="onDatasetClick(dataset)">View</button>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="table-row"></tr>
        </table>

        <mat-paginator [pageSize]="5" [pageSizeOptions]="[5, 10, 25, 100]" showFirstLastButtons></mat-paginator>
      </mat-card-content>
    </mat-card>
  </div>

  <div class="layout-container__side">
    <h4>Recently available datasets </h4>
    <table mat-table [dataSource]="sideTableDataSource" class="mat-elevation-z8">
      <ng-container matColumnDef="id">
        <td mat-cell *matCellDef="let dataset">{{ dataset.id }}</td>
      </ng-container>

      <ng-container matColumnDef="name">
        <td mat-cell *matCellDef="let dataset" class="clickable-row">{{ dataset.name }}</td>
      </ng-container>

      <ng-container matColumnDef="uploadedBy">
        <td mat-cell *matCellDef="let dataset">{{ dataset.uploadedBy }}</td>
      </ng-container>

      <ng-container matColumnDef="updateDate">
        <td mat-cell *matCellDef="let dataset" class="clickable-row">{{ dataset.updateDate | date }}</td>
      </ng-container>

      <ng-container matColumnDef="actions">
        <td mat-cell *matCellDef="let dataset">View</td>
      </ng-container>

      <tr mat-row *matRowDef="let row; columns: displayedSideColumns;" class="table-row"></tr>
    </table>

    <mat-paginator #sidePaginator [pageSize]="4" [showFirstLastButtons]="false" [hidePageSize]="true"></mat-paginator>

    @if (selectedDataset) {
      <mat-card class="layout-container__side__selected-card">
        <mat-card-content>
          <h4>Selected Dataset</h4>
          <p>Name: {{ selectedDataset.name }}</p>
        </mat-card-content>
      </mat-card>
    }
  </div>
</div>
